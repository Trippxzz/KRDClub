{% extends 'base.html' %}
{% load static %}

{% block title %}Valorar Compra #{{ venta.id }} - KRD Club{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/valoraciones.css' %}">
{% endblock %}

{% block content %}
<div class="min-h-screen bg-white py-16">
    <div class="max-w-2xl mx-auto px-6">
        
        <!-- Header -->
        <div class="text-center mb-12 border-b border-gray-200 pb-8">
            <h1 class="text-3xl md:text-4xl font-light text-gray-900 mb-2" style="font-family: 'Playfair Display', serif;">
                Valorar Compra
            </h1>
            <p class="text-gray-500">Tu opinión nos ayuda a mejorar</p>
        </div>

        <!-- Info de la orden -->
        <div class="mb-10 p-6 bg-gray-50 border border-gray-200">
            <div class="grid grid-cols-2 md:grid-cols-3 gap-6">
                <div>
                    <p class="text-xs text-gray-500 uppercase tracking-wider">Número de Orden</p>
                    <p class="text-lg font-semibold text-gray-900">#{{ venta.id }}</p>
                </div>
                <div>
                    <p class="text-xs text-gray-500 uppercase tracking-wider">Fecha</p>
                    <p class="text-gray-700">{{ venta.fecha_venta|date:"d/m/Y" }}</p>
                </div>
                <div>
                    <p class="text-xs text-gray-500 uppercase tracking-wider">Productos</p>
                    <p class="text-gray-700">{{ productos_venta.count }}</p>
                </div>
            </div>
        </div>

        <!-- Formulario -->
        <form method="post">
            {% csrf_token %}
            
            <!-- Valoración en estrellas -->
            <div class="mb-10">
                <label class="block text-sm font-medium text-gray-900 mb-4">¿Qué tal fue tu experiencia?</label>
                <div class="star-rating flex justify-center gap-3 text-4xl" id="rating-general">
                    <i class="star fas fa-star cursor-pointer" data-value="1"></i>
                    <i class="star fas fa-star cursor-pointer" data-value="2"></i>
                    <i class="star fas fa-star cursor-pointer" data-value="3"></i>
                    <i class="star fas fa-star cursor-pointer" data-value="4"></i>
                    <i class="star fas fa-star cursor-pointer" data-value="5"></i>
                </div>
                <input type="hidden" name="estrellas" id="estrellas" value="5">
                <p class="text-center text-gray-500 text-sm mt-3" id="rating-text">Excelente</p>
            </div>
            
            <!-- Comentario -->
            <div class="mb-8">
                <label class="block text-sm font-medium text-gray-900 mb-3">Comentario <span class="text-gray-400 font-normal">(opcional)</span></label>
                <textarea 
                    name="comentario" 
                    id="comentario"
                    rows="4"
                    maxlength="300"
                    class="w-full px-4 py-3 border border-gray-300 focus:border-black focus:outline-none focus:ring-1 focus:ring-black transition resize-none"
                    placeholder="Cuéntanos tu experiencia..."
                ></textarea>
                <p class="text-right text-xs text-gray-400 mt-2"><span id="char-count">0</span>/300</p>
            </div>

            <!-- Botón -->
            <button type="submit" class="w-full bg-black text-white py-3 font-medium tracking-wider uppercase hover:bg-gray-900 transition">
                Enviar Valoración
            </button>
        </form>

    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/valoraciones.js' %}"></script>
{% endblock %}
